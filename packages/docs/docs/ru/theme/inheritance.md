---
en: 58f7603f6806fc4c9916f1a05f3afc9795f51584
lang: ru-RU
---

# Наследование Темы <Badge type="warn" text="beta" />

## Причины

У нас есть две основные причины для поддержки этой функции:

1. VuePress предоставляет пользователям [тему по умолчанию](./default-theme-config.md), которая в большинстве сценариев отвечает потребностям авторов документации, несмотря на то, что все еще есть много пользователей, которые решили выполнить `eject` и изменить ее, даже если им необходимо внести лишь незначительные изменения в один из компонентов.
   
2. В [0.x](https://vuepress.vuejs.org/guide/custom-themes.html#site-and-page-metadata) для темы необходим только один `Layout.vue`, поэтому мы можем добиться простого расширения, непосредственно оборачивая `Layout.vue` другой темы.

К 1.x элементы темы стали более сложными, у нас появилась [конфигурация уровня темы](./option-api.md), которая поддерживает плагины, пользовательский глобальный макет и т.д. Кроме того, у нас также представлены [условные обозначения структуры каталогов](./writing-a-theme.md#структура-каталогов) при разработке темы, например, `styles/index.styl`, на этом фоне мы не можем добиться наследования как было в 0.x.

Поэтому нам необходимо предоставить разумную и надежную стратегию наследования тем.

## Концепции

Чтобы представить этот раздел, давайте начнем с нескольких основных понятий:

- **Атомарная тема**：т.е. родительская тема, которая реализована полностью с нуля, как тема по умолчанию.
- **Производная тема**：т.е. дочерняя тема, которая создается на основе родительской темы.

::: tip
На данный момент наследование темы не поддерживает наследование высокого порядка, то есть производная тема не может быть унаследована.
:::

## Использование

Предположим, что вы хотите создать тему, унаследованную от темы по умолчанию, вам просто нужно настроить параметр [extend](./option-api.md#extend) в конфигурации вашей темы:

```js
module.exports = {
  extend: '@vuepress/theme-default'
}
```

## Стратегия наследования

Все возможности родительской темы будут `"passed"` дочерней теме. Для соглашений на уровне файлов дочерняя тема может переопределить ее, создав файл с тем же именем в том же месте. Для некоторых параметров конфигурации темы, таких как [globalLayout](./option-api.md#globallayout), дочерняя тема может переопределить ее с тем же именем конфигурации.

[Соглашения об уровне файла](./writing-a-theme.md#структура-каталогов) следующие:

- **Глобальные компоненты**，то есть компоненты Vue в разделе `theme/global-components`.
- **Компоненты**，т.е. компоненты Vue в разделе `theme/components`.
- **Глобальный стиль и Палитра**，т.е. `index.styl` и `palette.styl` в разделе `theme/styles`.
- **HTML шаблон**，т.е. `dev.html` и `ssr.html` в разделе `theme/templates`.
- **Файл расширения приложения на уровне темы**，т.е. `theme/enhanceApp.js`

Для конфигурации темы параметры конфигурации, которые могут быть переопределены дочерней темой, следующие:

- [devTemplate](./option-api.md#devtemplate)
- [ssrTemplate](./option-api.md#ssrtemplate)
- [globalLayout](./option-api.md#globallayout)

Параметры конфигурации темы, которые нельзя переопределить дочерней темой:

- [extend](./option-api.md#extend)

Варианты конфигурации темы, требующие специальной обработки:

- [plugins](./option-api.md#plugins)：Смотрите [Переопределение плагинов](#переопределение-плагинов)。

## Переопределение плагинов

Для [plugins](./option-api.md#plugins) в родительской теме дочерняя тема не может переопределить ее интуитивно, но параметры плагина могут быть переопределены путем создания конфигурации плагина с тем же именем.

Например, если родительская тема имеет следующую конфигурацию:

```js
// parentThemePath/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', {
      searchMaxSuggestions: 5
    }]
  ]
}
```

Дочерняя тема может изменять параметры плагина следующими способами:

```js
// themePath/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', {
      searchMaxSuggestions: 10
    }]
  ]
}
```

Дочерняя тема может даже отключить его:

```js
// themePath/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', false]
  ]
}
```

::: warning
Вам не следует этого делать, если вы не уверены, что отключение плагинов в родительских темах не вызовет проблем.
:::

## Переопределение компонентов

Вы можете переопределить компоненты с тем же именем в родительской теме. По умолчанию, когда компоненты в родительской теме используют относительные пути для ссылки на другие компоненты, вы не сможете сделать это, потому что вы не можете изменить код родительской темы во время выполнения.

VuePress решает эту проблему умным способом, но есть требование для родительской темы - **Все компоненты должны использовать псевдоним `@theme` для ссылки на другие компоненты**.

Например, если вы разрабатываете атомарную тему со следующей структурой:

::: vue
theme
├── components
│   ├── `Home.vue`
│   ├── `Navbar.vue`
│   └── `Sidebar.vue`
├── layouts
│   ├── `404.vue`
│   └── `Layout.vue`
├── package.json
└── index.js
:::

Затем в любых компонентах Vue темы **вы должны получить доступ к корневому каталогу темы через `@theme`**:

```vue
<script>
import Home from '@theme/components/Navbar.vue'
// ...
</script>
```

Исходя из этого, при создании компонента `Navbar` в том же месте в дочерней теме

::: vue
theme
└── components
    └── `Navbar.vue`
::: 

`@theme/components/Navbar.vue` автоматически сопоставится с компонентом Navbar в дочерней теме. и когда вы удалите компонент, `@theme/components/Navbar.vue`, автоматически восстанавливает компонент Navbar в родительской теме.

Таким образом, вы можете легко "вмешиваться" в какую-то часть атомарной темы.

::: tip
1. Вам лучше переопределить компонент на основе кода соответствующего компонента в родительской теме.
2. В настоящее время при локальной разработке темы вам необходимо вручную перезапустить сервер разработки, после создания или удаления компонента.
:::

## Доступ к родительской теме

Вы можете использовать `@parent-theme` для доступа к корневому пути родительской темы. В следующем примере показано создание компонента макета с тем же именем в дочерней теме ииспользование слотов в родительской теме. [@vuepress/theme-vue](https://github.com/vuejs/vuepress/tree/master/packages/%40vuepress/theme-vue) создается таким образом

```vue
<!-- themePath/components/Foo.vue -->
<template>
  <ParentLayout>
    <Foo slot="foo"/>
  </ParentLayout>
</template>

<script>
import ParentLayout from '@parent-theme/layouts/Layout.vue'
import Foo from '@theme/components/Foo.vue'

export default {
  components: {
    ParentLayout,
    Foo
  }
}
</script>
```





