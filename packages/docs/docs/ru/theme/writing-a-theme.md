---
en: 98fed759d6152e414d8cff200975508a45ff0ff3
lang: ru-RU
---

# Написание темы

Чтобы написать тему, создайте каталог `.vuepress/theme` в корневом каталоге документации, а затем создайте файл `Layout.vue`:

::: vue
.
└─ .vuepress
   └─ `theme`
       └─ Layout.vue
:::

Оттуда все так же, как разработка нормального приложения Vue. Полностью зависит от вас, как вы хотите организовать свою тему.

## Содержание

Скомпилированное содержимое отображаемого текущего файла `.md` будет доступно как специальный глобальный компонент `<Content/>`. Вам нужно будет отобразить его где-то в макете, чтобы отобразить содержимое страницы. Простейшей темой может быть только один компонент `Layout.vue` со следующим содержимым:

``` html
<template>
  <div class="theme-container">
    <Content/>
  </div>
</template>
```

**Смотрите также:**

- [Слот разметки](../guide/markdown-slot.md)

## Структура каталогов

Одного только `Layout.vue` может быть недостаточно, и вы также можете определить дополнительные компоненты макета в теме для использования на разных страницах. Вы также можете настроить [palette](../config/README.md#palette-styl) и даже применить некоторые плагины.

Итак, пришло время реорганизовать вашу тему, согласованная структура директории темы выглядит следующим образом:

::: vue
theme
├── `global-components`
│   └── xxx.vue
├── `components`
│   └── xxx.vue
├── `layouts`
│   ├── Layout.vue _(**Обязательный**)_
│   └── 404.vue
├── `styles`
│   ├── index.styl
│   └── palette.styl
├── `templates`
│   ├── dev.html
│   └── ssr.html
├── `index.js`
├── `enhanceApp.js`
└── package.json
:::

- `theme/global-components`: Компоненты в этом каталоге будут автоматически зарегистрированы, как глобальные копоненты. Подробнее смотрите в [@vuepress/plugin-register-components](https://github.com/vuejs/vuepress/tree/master/packages/@vuepress/plugin-register-components).
- `theme/components`: Ваши компоненты.
- `theme/layouts`: Компоненты макета темы, где требуется `Layout.vue`.
- `theme/styles`: Глобальный стиль и палитра.
- `theme/templates`: Измененный шаблон по умолчанию.
- `theme/index.js`: Входной файл конфигурации темы.
- `theme/enhanceApp.js`: Улучшения на уровне темы.

::: warning Заметка
Когда вы публикуете свою тему как пакет NPM, если у вас нет какой-либо конфигурации темы, это означает, что у вас нет `theme/index.js`, вам нужно установить для пол `"main"` значение `layouts/Layout.vue` в `package.json`, только так VuePress может правильно разрешить тему.
```json
{
  ...
  "main": "layouts/Layout.vue",
  ...
}
```

:::

## Компонент макета

Предположим, что ваша папка с раскладками темы выглядит следующим образом:

::: vue
theme
└── `layouts`
    ├── Layout.vue
    ├── AnotherLayout.vue
    └── 404.vue
:::

Затем все страницы будут использовать `Layout.vue` в качестве компонента макета по умолчанию, в то время как не соответствующие маршруты будут использовать `404.vue`.

Если вы хотите изменить макет некоторых страниц на `AnotherLayout.vue`, вам просто нужно обновить frontmatter этой страницы:

```markdown
---
layout: AnotherLayout
---
````

::: tip
Каждый компонент макета может отображать отдельные страницы. Если вы хотите применить некоторый глобальный интерфейс пользователя (например, глобальный заголовок), попробуйте использовать [globalLayout](./option-api.md# globallayout).
:::

## Применение плагинов

Вы можете применить некоторые плагины к теме с помощью `theme/index.js`.

```js
module.exports = {
  plugins: [
    ['@vuepress/pwa', { 
      serviceWorker: true,
      updatePopup: true
    }]
  ]
}
```

## Метаданные сайта и страницы

Компонент `Layout` будет вызываться один раз для каждого файла `.md` в `docs`, а метаданные для всего сайта и конкретной страницы будут отображаться соответственно как свойства `this.$site` и `this.$page`, которые вводятся в каждый компонент приложения.

Это значение `$site` этого сайта:

``` json
{
  "title": "VuePress",
  "description": "Статический генератор сайтов на Vue",
  "base": "/",
  "pages": [
    {
      "lastUpdated": 1524027677000,
      "path": "/",
      "title": "VuePress",
      "frontmatter": {}
    },
    ...
  ]
}
```

`title`, `description` и `base` копируются из соответствующих полей в `.vuepress/config.js`. `pages` содержит массив объектов метаданных для каждой страницы, включая ее путь, заголовок страницы (явно указанный в [YAML front matter](../guide/markdown.md#front-matter) или выведенный из первого заголовка на стравнице), а также любые данные об исходном тексте YAML в этом файле.

Это объект `$page` для этой страницы, которую вы просматриваете:

``` json
{
  "lastUpdated": 1524847549000,
  "path": "/guide/custom-themes.html",
  "title": "Custom Themes",
  "headers": [/* ... */],
  "frontmatter": {}
}
```

Если пользователь предоставил `themeConfig` в `.vuepress/config.js`, он также будет доступен как `$site.themeConfig`. Вы можете использовать это, чтобы позволить пользователям настраивать поведение вашей темы - например, указывать категории и порядок страниц. Затем вы можете использовать эти данные вместе с `$site.pages` для динамического построения навигационных ссылок.

Наконец, не забывайте, что `this.$route` и `this.$router` также доступны как часть API Vue Router.

::: tip
  `lastUpdated` это отметка времени UNIX последнего коммита git этого файла, более подробную информацию см. в [Последнее обновление](../theme/default-theme-config.md#last-updated).
:::

## Содержание выдержки

Если файл markdown содержит комментарий `<!-- more -->`, любое содержимое над комментарием будет извлечено и отображено как `$page.excerpt`. Если вы создаете собственную тему для ведения блога, эти данные можно использовать для отображения списка сообщений с выдержками.

## Улучшения на уровне приложения

Темы могут улучшить приложение Vue, которое использует VuePress, открыв файл `Enhance.pp.js` в корне темы. Файл должен `export default` хук-функцию, которая получит объект, содержащий некоторые значения уровня приложения. Вы можете использовать этот хук для установки дополнительных плагинов Vue, регистрации глобальных компонентов или добавления дополнительных хуков маршрутизатора:

``` js
export default ({
  Vue, // версия Vue, используемая в приложении VuePress
  options, // параметры для корневого экземпляра Vue
  router, // экземпляр маршрутизатора для приложения
  siteData // метаданные сайта
}) => {
  // ...применение улучшения к приложению
}
```
