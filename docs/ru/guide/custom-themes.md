# Пользовательские Темы

::: tip Совет
Компоненты темы подчиняются тем же [Ограничениям доступа API браузера](./using-vue.md#ограничения-доступа-api-браузера).
:::

VuePress использует отдельные компоненты Vue для пользовательских тем. Чтобы использовать пользовательский макет, создайте каталог `.vuepress/theme` в корневом каталоге документов, а затем создайте файл `Layout.vue`:

```
.
└─ .vuepress
   └─ theme
      └─ Layout.vue
```

Оттуда это так же, как разработка нормального приложения Vue. Это полностью зависит от вас, как организовать свою тему.

## Метаданные сайта и страницы

Компонент `Layout` будет вызываться один раз для каждого файла `.md` в `docs`, а метаданные для всего сайта и конкретной страницы будут отображаться соответственно как `this.$site` и `this.$page` свойства, которые вводятся в каждый компонент приложения.

Пример значения `$site` для этого сайта:

``` json
{
  "title": "VuePress",
  "description": "Статический генератор сайтов на Vue",
  "base": "/",
  "pages": [
    {
      "lastUpdated": 1524027677000,
      "path": "/",
      "title": "VuePress",
      "frontmatter": {}
    },
    ...
  ]
}
```

`title`, `description` и `base` копируются из соответствующих полей в `.vuepress/config.js`. `pages` содержит массив объектов метаданных для каждой страницы, включая ее путь, заголовок страницы (явно указанный в [YAML front matter](./markdown.md#front-matter) или выведенный из первого заголовка на странице), и любые данные фронтального вопроса YAML в этом файле.

Это объект `$page` для страницы, которую вы просматриваете:

``` json
{
  "lastUpdated": 1524847549000,
  "path": "/guide/custom-themes.html",
  "title": "Пользовательские Темы",
  "headers": [/* ... */],
  "frontmatter": {}
}
```

Если пользователь предоставил `themeConfig` в `.vuepress/config.js`, он также будет доступен как `$site.themeConfig`. Вы можете использовать это, чтобы позволить пользователям настраивать поведение вашей темы - например, указывать категории и порядок страниц. Затем вы можете использовать эти данные вместе с `$site.pages` для динамического построения навигационных ссылок.

Наконец, не забывайте, что `this.$route` и`this.$router` также доступны как часть API Vue Router.

::: tip
    `lastUpdated` - это метка времени UNIX последнего коммита git этого файла, более подробную информацию см. в [Последнее обновление](../default-theme-config/README.md#последнее-обновление).
:::

## Содержание выдержки

Если файл Markdown содержит комментарий `<!-- more -->`, любое содержимое над комментарием будет извлечено и отображено как `$page.excerpt`. Если вы создаете собственную тему для ведения блога, эти данные можно использовать для отображения списка сообщений с выдержками.

## Содержание

Скомпилированное содержимое отображаемого текущего файла `.md` будет доступно как специальный глобальный компонент `<Content/>`. Вам нужно будет отобразить его где-то в макете, чтобы отобразить содержимое страницы. Простейшей темой может быть только один компонент `Layout.vue` со следующим содержимым:

``` html
<template>
  <div class="theme-container">
    <Content/>
  </div>
</template>
```

## Улучшения уровня приложения

Темы могут улучшить приложение Vue, которое использует VuePress, открыв файл `enhanceApp.js` в корне темы. Файл должен `export default` хук-функцию, которая получит объект, содержащий некоторые значения уровня приложения. Вы можете использовать этот хук для установки дополнительных плагинов Vue, регистрации глобальных компонентов или добавления дополнительных хуков маршрутизатора:

``` js
export default ({
  Vue, // версия Vue, используемая в приложении VuePress
  options, // параметры для корневого экземпляра Vue
  router, // экземпляр маршрутизатора для приложения
  siteData // метаданные сайта
}) => {
  // ...применить улучшения к приложению
}
```

## Использование темы из зависимости

Темы могут быть опубликованы на npm в необработанном формате Vue SFC как `vuepress-theme-xxx`.

Чтобы использовать тему из зависимости npm, укажите параметр `theme` в `.vuepress/config.js`:

``` js
module.exports = {
  theme: 'awesome'
}
```

VuePress попытается найти и использовать `node_modules/vuepress-theme-awesome/Layout.vue`.

## Настройка темы по умолчанию

Команда `vuepress eject [targetDir]` скопирует исходный код темы по умолчанию в `.vuepress/theme` для полной настройки. Тем не менее, обратите внимание, что после извлечения вы останетесь сами по себе и не будете получать будущие обновления или исправления ошибок для темы по умолчанию, даже если вы обновите VuePress.
